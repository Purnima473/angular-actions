!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("angular-rules-engine")):"function"==typeof define&&define.amd?define(["exports","angular-rules-engine"],e):e(t.angularActions={},t["angular-rules-engine"])}(this,function(t,e){"use strict";!function(t){t[t.Success=1]="Success",t[t.Fail=2]="Fail",t[t.Unknown=3]="Unknown"}(t.ActionResult||(t.ActionResult={}));var o=function(){function o(){this.allowExecution=!0,this._validationContext=new e.ValidationContext,this.actionResult=t.ActionResult.Unknown}return Object.defineProperty(o.prototype,"validationContext",{get:function(){return this._validationContext},enumerable:!0,configurable:!0}),o.prototype.execute=function(){console.log("Preparing to execute action."),this.processActionPipeline()},o.prototype.processActionPipeline=function(){this.startAction(),this.allowExecution&&this.processAction(),this.finishAction()},o.prototype.startAction=function(){console.log("Starting action."),this.start(),this.audit(),this.preValidateAction(),this.evaluateRules(),this.postValidateAction(),this.preExecuteAction()},o.prototype.finishAction=function(){console.log("Finishing action."),this.postExecuteAction(),this.validateActionResult(),this.finish()},o.prototype.processAction=function(){console.log("Processing action."),this.performAction()},o.prototype.performAction=function(){throw new Error("Not implemented. Requires implementation in concrete action.")},o.prototype.start=function(){console.log("Starting action.")},o.prototype.audit=function(){console.log("Auditing action.")},o.prototype.preValidateAction=function(){console.log("Pre-validating action.")},o.prototype.evaluateRules=function(){console.log("Evaluating action rules.");this.validateAction().isValid?(this.allowExecution=!0,this.validationContext.state=e.ValidationContextState.Success):(this.allowExecution=!1,this.validationContext.state=e.ValidationContextState.Failure)},o.prototype.postValidateAction=function(){console.log("Post-Validation of action.")},o.prototype.preExecuteAction=function(){console.log("Pre-execution of action.")},o.prototype.postExecuteAction=function(){console.log("Post-execution of action")},o.prototype.validateActionResult=function(){throw new Error("Concrete actions required to implement this method.")},o.prototype.finish=function(){console.log("Finish action.")},o.prototype.validateAction=function(){return console.log("Validating the action."),this.validationContext},o}();!function(t){t[t.Information=1]="Information",t[t.Warning=2]="Warning",t[t.Error=3]="Error"}(t.MessageType||(t.MessageType={}));var i=function(){function e(){this.Messages=new Array,this.ErrorMessages=new Array}return e.prototype.addMessage=function(t){this.Messages.push(t)},e.prototype.hasErrors=function(){return!!(this.Messages&&this.Messages.length>0&&(this.ErrorMessages=this.Messages.filter(function(e){return e.MessageType===t.MessageType.Error}),this.ErrorMessages.length>0))},e.prototype.isGood=function(){return!(this.Messages&&this.Messages.length>0&&(this.ErrorMessages=this.Messages.filter(function(e){return e.MessageType===t.MessageType.Error}),this.ErrorMessages.length>0))},e}(),n=function(){function t(t,e,o,i,n){this.Name=t,this.Message=e,o&&(this.MessageType=o),i&&(this.Source=i),this.DisplayToUser=n}return t.prototype.WithName=function(t){return this.Name=t,this},t.prototype.WithMessage=function(t){return this.Message=t,this},t.prototype.WithMessageType=function(t){return this.MessageType=t,this},t.prototype.WithSource=function(t){return this.Source=t,this},t.prototype.WithDisplayToUser=function(t){return this.DisplayToUser=t,this},t.prototype.toString=function(){return"Name: "+this.Name+"; Message: "+this.Message+"; MessageType: "+this.MessageType.toString()+"; Source: "+this.Source+"; DisplayToUser: "+this.DisplayToUser},t}();t.Action=o,t.ServiceContext=i,t.ServiceMessage=n,Object.defineProperty(t,"__esModule",{value:!0})});