!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("angular-rules-engine")):"function"==typeof define&&define.amd?define(["exports","angular-rules-engine"],o):o(t.angularActions={},t["angular-rules-engine"])}(this,function(t,o){"use strict";!function(t){t[t.Success=1]="Success",t[t.Fail=2]="Fail",t[t.Unknown=3]="Unknown"}(t.ActionResult||(t.ActionResult={}));var n=function(){function n(){this.allowExecution=!0,this._validationContext=new o.ValidationContext,this.actionResult=t.ActionResult.Unknown}return Object.defineProperty(n.prototype,"validationContext",{get:function(){return this._validationContext},enumerable:!0,configurable:!0}),n.prototype.execute=function(){console.log("Preparing to execute action."),this.processActionPipeline()},n.prototype.processActionPipeline=function(){this.startAction(),this.allowExecution&&this.processAction(),this.finishAction()},n.prototype.startAction=function(){console.log("Starting action."),this.start(),this.audit(),this.preValidateAction(),this.evaluateRules(),this.postValidateAction(),this.preExecuteAction()},n.prototype.finishAction=function(){console.log("Finishing action."),this.postExecuteAction(),this.validateActionResult(),this.finish()},n.prototype.processAction=function(){console.log("Processing action."),this.performAction()},n.prototype.performAction=function(){throw new Error("Not implemented. Requires implementation in concrete action.")},n.prototype.start=function(){console.log("Starting action.")},n.prototype.audit=function(){console.log("Auditing action.")},n.prototype.preValidateAction=function(){console.log("Pre-validating action.")},n.prototype.evaluateRules=function(){console.log("Evaluating action rules.");this.validateAction().isValid?(this.allowExecution=!0,this.validationContext.state=o.ValidationContextState.Success):(this.allowExecution=!1,this.validationContext.state=o.ValidationContextState.Failure)},n.prototype.postValidateAction=function(){console.log("Post-Validation of action.")},n.prototype.preExecuteAction=function(){console.log("Pre-execution of action.")},n.prototype.postExecuteAction=function(){console.log("Post-execution of action")},n.prototype.validateActionResult=function(){throw new Error("Concrete actions required to implement this method.")},n.prototype.finish=function(){console.log("Finish action.")},n.prototype.validateAction=function(){return console.log("Validating the action."),this.validationContext},n}();t.Action=n,Object.defineProperty(t,"__esModule",{value:!0})});